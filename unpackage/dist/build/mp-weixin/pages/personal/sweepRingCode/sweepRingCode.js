(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/sweepRingCode/sweepRingCode"],{"13a2":function(e,n,t){},"20e7":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("2f62"),i=t("3fd9"),c=t("09bf"),r=t("1d11"),a=t("6852");function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){f(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=function(){t.e("pages/personal/sweepRingCode/xh-winning-window").then(function(){return resolve(t("07f2"))}.bind(null,t)).catch(t.oe)},d=function(){t.e("pages/personal/sweepRingCode/winAgain").then(function(){return resolve(t("fc1a"))}.bind(null,t)).catch(t.oe)},h=function(){t.e("pages/personal/sweepRingCode/winAgainThree").then(function(){return resolve(t("f3be"))}.bind(null,t)).catch(t.oe)},p=function(){t.e("pages/personal/sweepRingCode/winAgainFour").then(function(){return resolve(t("d32b"))}.bind(null,t)).catch(t.oe)},w="",g=null,b=null,v=null,m=0,S="",y={onLoad:function(e){S=e.wxScanQrCode,m=(0,a.getScanSweepNum)(),g=(0,c.xhAudio)({url:"https://test-file.y1b.cn/public/music/hnlh.mp3"}),this.initSuccessAudio(m),v=(0,c.xhAudio)({url:r.fileBaseUrl+"/public/img/to2/cmp3/02/BFXN_MUSIC_04.mp3"})},computed:u({},(0,o.mapGetters)(["userLocation"])),data:function(){return{isShowTips:!0,isHaveProblem:!1}},onShow:function(){var e=this;w="",setTimeout((function(){S?(w=S,e.closeScan(),e.winningCheck(S),S=""):e.showScan()}),0)},components:{xhWinningWindow:l,winAgain:d,winAgainThree:h,winAgainFour:p},methods:{initSuccessAudio:function(e){var n=e>=4?1:e+1;b=(0,c.xhAudio)({url:"https://test-file.y1b.cn/public/music/bfxl/202105/win_0"+n+".mp3"})},haveProblem:function(){this.isHaveProblem=!0,this.$refs.xhScanCode.close(),this.$refs.xhMsgDialog.show({msg:"扫码遇到问题？黑屏或相机无法打开？请点击确认按钮，为您提供中转方案~"},"goWxScan")},goWxScan:function(){var e=this;wx.scanCode({success:function(n){e.onScancode(n.result)}})},onScancode:function(e){var n=this;w||(w=e,this.$refs.xhScanCode.play(),this.closeScan(),setTimeout((function(){n.winningCheck(w)}),0))},closeScan:function(){this.isShowTips=!1,this.$refs.xhScanCode.close()},showScan:function(){this.isShowTips=!0,this.isHaveProblem||this.$refs.xhScanCode.reset()},winningCheck:function(e){var n=this;(0,i.cscanQr)(u({code:w},this.userLocation)).then((function(e){if(S="",(0,a.removeWxScanQrCode)(),1==e.code){switch(m++,m>4&&(m=1),b.play(),m){case 1:n.$refs.winningWindow.show(e.data);break;case 2:n.$refs.winAgain.show(e.data);break;case 3:n.$refs.winAgainThree.show(e.data);break;case 4:n.$refs.winAgainFour.show(e.data);break}return n.initSuccessAudio(m),void(0,a.setScanSweepNum)(m)}return 2==e.code?(m=0,(0,a.setScanSweepNum)(0),void n.$router.navigateTo({url:"/pages/personal/scanResult/index?type=2&data="+encodeURIComponent(JSON.stringify(e.data))})):3==e.code?(m=0,(0,a.setScanSweepNum)(0),void n.$router.navigateTo({url:"/pages/personal/scanResult/index?type=1&data="+encodeURIComponent(JSON.stringify(e.data))})):(n.$refs.xhMsgDialog.show(e),e.data&&3==e.data.code&&g.play(),void(e.data&&10==e.data.code&&v.play()))})).catch((function(e){setTimeout((function(){w=""}),3e3)}))},closeNotice:function(){w="",this.showScan()}},onUnload:function(){g.destroy(),b.destroy()}};n.default=y},"537c":function(e,n,t){"use strict";t.r(n);var o=t("20e7"),i=t.n(o);for(var c in o)"default"!==c&&function(e){t.d(n,e,(function(){return o[e]}))}(c);n["default"]=i.a},"86b7":function(e,n,t){"use strict";var o=t("13a2"),i=t.n(o);i.a},8716:function(e,n,t){"use strict";var o;t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return o}));var i=function(){var e=this,n=e.$createElement;e._self._c},c=[]},ec6c:function(e,n,t){"use strict";t.r(n);var o=t("8716"),i=t("537c");for(var c in i)"default"!==c&&function(e){t.d(n,e,(function(){return i[e]}))}(c);t("86b7");var r,a=t("f0c5"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);n["default"]=s.exports},f473:function(e,n,t){"use strict";(function(e){t("cadd");o(t("66fd"));var n=o(t("ec6c"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])}},[["f473","common/runtime","common/vendor"]]]);