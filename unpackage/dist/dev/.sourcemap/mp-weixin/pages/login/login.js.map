{"version":3,"sources":["uni-app:///main.js","webpack:///E:/work/works/彬纷享你小程序/bfyl_app/pages/login/login.vue?7d17","webpack:///E:/work/works/彬纷享你小程序/bfyl_app/pages/login/login.vue?5d71","webpack:///E:/work/works/彬纷享你小程序/bfyl_app/pages/login/login.vue?b15e","webpack:///E:/work/works/彬纷享你小程序/bfyl_app/pages/login/login.vue?053c","uni-app:///pages/login/login.vue","webpack:///E:/work/works/彬纷享你小程序/bfyl_app/pages/login/login.vue?da23","webpack:///E:/work/works/彬纷享你小程序/bfyl_app/pages/login/login.vue?a50b"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AAC0L;AAC1L,gBAAgB,iMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwsB,CAAgB,mtBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+C5tB;;;;AAIA;;;AAGA;AACA,iF;AACA;AACA;AACA;AACA,c;AACA;AACA,MADA,kBACA;AACA;AACA,uBADA;AAEA,wBAFA;AAGA,4BAHA;AAIA,kDAJA;;AAMA,GARA;AASA,QATA,kBASA,MATA,EASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAhBA;AAiBA,SAjBA,qBAiBA;AACA;AACA;AACA,GApBA;AAqBA,QArBA,oBAqBA;AACA;AACA,GAvBA;AAwBA;AACA,kCADA,CAxBA;;AA2BA;AACA;AACA,4BADA;AAEA,kCAFA;AAGA,oCAHA;AAIA,wCAJA,GADA;;AAOA;AACA,eARA,yBAQA;AACA;AACA,4CADA;;AAGA,KAZA;AAaA;AACA,aAdA,uBAcA;AACA;AACA;AACA;AACA;AACA,uCADA;;AAGA,KArBA;AAsBA;AACA,aAvBA,qBAuBA,IAvBA,EAuBA;AACA;AACA,KAzBA;AA0BA;AACA,iBA3BA,yBA2BA,IA3BA,EA2BA;AACA;AACA;AACA,oEADA;;AAGA,KAhCA;AAiCA;AACA,eAlCA,yBAkCA;AACA;AACA;AACA;AACA;AACA,uCADA;;AAGA,KAzCA;AA0CA,YA1CA,sBA0CA;AACA;AACA;AACA;AACA,yBADA;AAEA,+BAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBADA;AAEA,kBAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,qCAFA;AAGA,+BAHA;;AAKA;AACA;AACA;AACA,SAjBA;AAkBA;AACA;AACA;AACA;AACA,2BADA;AAEA,yCAFA;AAGA,6BAHA;;AAKA,SA1BA;;;;AA8BA,KAzFA;AA0FA;AACA,cA3FA,sBA2FA,QA3FA,EA2FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,2BAFA;AAGA,0BAHA;AAIA;AACA;AACA;AACA;AACA,gDADA;;AAGA,6DALA,CAKA;AACA;AACA;AACA;AACA,mDADA;;AAGA,aAhBA;;AAkBA,SAtBA,EAsBA,KAtBA,CAsBA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,uEAFA;AAGA,iCAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDADA;AAEA,8CAFA;AAGA,gDAHA;;AAKA;AACA,6BATA;;AAWA;AACA;AACA;AACA,6DADA;;AAGA,uBAnBA;;AAqBA;AACA,iBA7BA;;AA+BA;AACA;AACA;AACA,6BADA;AAEA,gCAFA;;AAIA,oBAvCA;;AAyCA,SAjEA;AAkEA,OApEA,EAoEA,KApEA,CAoEA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,4BAFA;;AAIA;AACA,OA7EA;AA8EA,KA3KA;AA4KA;AACA,SA7KA,mBA6KA;AACA;AACA;AACA;AACA,yBADA;AAEA,+BAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,2BAFA;AAGA,0BAHA;AAIA;AACA;AACA;AACA;AACA,gDADA;;AAGA,6DALA,CAKA;AACA;AACA;AACA;AACA,mDADA;;AAGA,aAhBA;;AAkBA,SAtBA,EAsBA,KAtBA,CAsBA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,uEAFA;AAGA,iCAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDADA;AAEA,8CAFA;AAGA,gDAHA;;AAKA;AACA;AACA;AACA,6BAXA;;AAaA;AACA;AACA;AACA,6DADA;;AAGA,uBArBA;;AAuBA;AACA,iBA9BA;;AAgCA;AACA;AACA;AACA,+BADA;AAEA,6CAFA;AAGA,iCAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,+CADA;AAEA,wCAFA;AAGA,0CAHA;;AAKA;AACA;AACA;AACA,uBAXA;;AAaA;AACA,iBApBA;;AAsBA;AACA;AACA;AACA,6BADA;AAEA,gCAFA;;AAIA,oBAhEA;;AAkEA,SA1FA;AA2FA,OA9FA,EA8FA,KA9FA,CA8FA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,4BAFA;;AAIA;AACA,OAvGA;AAwGA,KAhSA,GA3BA,E;;;;;;;;;;;;;AC5DA;AAAA;AAAA;AAAA;AAA8xC,CAAgB,6uCAAG,EAAC,C;;;;;;;;;;;ACAlzC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"","\r\n<template>\r\n\t<view class=\"login\">\r\n\t\t<xh-navbar  title=\"登录\" titleColor=\"#000000\" titleAlign=\"titleCenter\"   leftImage=\"../../static/images/home.png\" @leftCallBack=\"homeClick\" :leftCallBack=\"true\" :isHome=\"true\"/>\r\n\t\t<!-- 欢迎登陆 -->\r\n\t\t<view class=\"wecome-login\">\r\n\t\t\t<image class=\"wecome-logo\"  src=\"../../static/images/logo.png\"></image>\r\n\t\t\t<view class=\"wecome-msg\">\r\n\t\t\t\t欢迎来到<text class=\"wecome-msg-stress\">彬纷享礼</text>请登录\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 提示信息 -->\r\n\t\t<view class=\"tips\">\r\n\t\t\t请点击下方按钮跳转微信授权登录\r\n\t\t</view>\r\n\t\t<!-- 登录按钮 -->\r\n\t\t<view class=\"login-btn\">\r\n\t\t\t<van-button v-if=\"!isAgreement\" round type=\"primary\" block color=\"linear-gradient(to right, #E71919, #A31015)\"\r\n\t\t\t @click=\"login\" size=\"large\">微信授权登录</van-button>\r\n\t\t\t <van-button v-else-if=\"isgetUserProfile&&isAgreement\" :loading=\"isDisabled\" loading-text=\"登录中...\" round type=\"primary\" block color=\"linear-gradient(to right, #E71919, #A31015)\" :disabled=\"isDisabled\"\r\n\t\t\t  @click=\"newLogin\" size=\"large\">微信授权登录</van-button>\r\n\t\t\t<van-button v-else :loading=\"isDisabled\" loading-text=\"登录中...\" round type=\"primary\" block color=\"linear-gradient(to right, #E71919, #A31015)\" :disabled=\"isDisabled\"\r\n\t\t\t @click=\"login\" size=\"large\" open-type=\"getUserInfo\">微信授权登录</van-button>\r\n\t\t</view>\r\n\t\t<view class=\"cancel-login-btn\">\r\n\t\t\t<van-button  round type=\"default\" block \r\n\t\t\t @click=\"cancelLogin\" size=\"large\">取消</van-button>\r\n\t\t</view>\r\n\t\t<!-- 协议 -->\r\n\t\t<view class=\"agreement\">\r\n\t\t\t<xh-check @change=\"agreement\" labelClass=\"agreement-read\" labelColor=\"#000000\" primaryColor=\"#E71919\" :checked=\"isAgreement\"\r\n\t\t\t label=\"我已阅读并同意\" />\r\n\t\t\t<text class=\"agreement-name\" @click=\"agreementLook('/index/index/bfxl.html')\">《隐私协议》</text>\r\n\t\t\t<text class=\"agreement-name\" @click=\"agreementLook('/index/index/bfxlfl.html')\">《平台服务协议》</text>\r\n\t\t</view>\r\n\t\t<!-- login error -->\r\n\t\t<view class=\"login-warn\">\r\n\t\t\t<icon type=\"info\" size=\"18\" color=\"#e8a010\"/>\r\n\t\t\t<text class=\"login-warn-tips\">登录遇到问题请</text>\r\n\t\t\t<text class=\"link-service\" @click=\"linkService\">联系客服</text>\r\n\t\t</view>\r\n\t\t<!-- 消息提示 -->\r\n\t\t<xh-notify ref=\"xhNotify\" :isCustom=\"true\"/>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapActions,\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\timport {\r\n\t\tPLAQUEADVERTISING\r\n\t} from '@/utils/index.js'\r\n\timport {baseUrl} from '@/utils/http.js'\r\n\timport {redirect,clearRedirect} from '@/utils/routerIntercept.js'\r\n\t//插屏广告管理\r\n\tlet _PLAQUEADVERTISING = PLAQUEADVERTISING()\r\n\t//用户信息\r\n\tlet _userData; \r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisDisabled: false,\r\n\t\t\t\tisAgreement: false,\r\n\t\t\t\tbaseUrl:baseUrl,\r\n\t\t\t\tisgetUserProfile:Boolean(wx.getUserProfile)\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\t//是否同意了协议\r\n\t\t\tif (option.isAgreement) {\r\n\t\t\t\tthis.isAgreement = true\r\n\t\t\t}\r\n\t\t\t//初始化广告\r\n\t\t\t_PLAQUEADVERTISING.init('adunit-7d704bfc0a67a060')\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t//播放广告\r\n\t\t\t_PLAQUEADVERTISING.play()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t_userData = null\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapGetters(['token'])\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions({\r\n\t\t\t\twxlogin: 'login/wxlogin',\r\n\t\t\t\tupdateUser: 'login/updateUser',\r\n\t\t\t\tgetUserInfo: 'login/getUserInfo',\r\n\t\t\t\tupdateUserNew: 'login/updateUserNew'\r\n\t\t\t}),\r\n\t\t\t//跳转客服\r\n\t\t\tlinkService(){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:'/pages/tabBar/service/service'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//返回键监听\r\n\t\t\thomeClick(){\r\n\t\t\t\tif(!this.token){\r\n\t\t\t\t\tthis.wxlogin().then(function(res){})\r\n\t\t\t\t}\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl:'/pages/tabBar/home/index'\r\n\t\t\t\t})\r\n\t\t    },\r\n\t\t\t//协议勾选\r\n\t\t\tagreement(flag) {\r\n\t\t\t\tthis.isAgreement = flag\r\n\t\t\t},\r\n\t\t\t//查看协议\r\n\t\t\tagreementLook(link) {\r\n\t\t\t\tlink = this.baseUrl + link\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/webview/webview?link=${link}#ISLOGIN`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//取消登录\r\n\t\t\tcancelLogin(){\r\n\t\t\t\tif(!this.token){\r\n\t\t\t\t\tthis.wxlogin().then(function(res){})\r\n\t\t\t\t}\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl:'/pages/tabBar/home/index'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnewLogin(){\r\n\t\t\t\t//未勾选协议\r\n\t\t\t\tif (!this.isAgreement) {\r\n\t\t\t\t\treturn this.$refs.xhNotify.show({\r\n\t\t\t\t\t\ttype: \"warning\",\r\n\t\t\t\t\t\tmessage: \"请阅读并同意登录协议\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t//防止多次点击\r\n\t\t\t\tthis.isDisabled = true\r\n\t\t\t\t//是否已获取用户信息 防止多次调用获取用户信息弹窗\r\n\t\t\t\tif(_userData){\r\n\t\t\t\t  return this.newWXLogin(_userData)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//获取用户加密信息\r\n\t\t\t\twx.getUserProfile({\r\n\t\t\t\t\tlang:\"zh_CN\",\r\n\t\t\t\t\tdesc: '登录', //不写不弹提示框\r\n\t\t\t\t\tsuccess: (user) => {\r\n\t\t\t\t\t\t_userData = user.userInfo\r\n\t\t\t\t\t\tif(!_userData||(typeof _userData === \"object\"&&Object.keys(_userData).length<7)){\r\n\t\t\t\t\t\t\t_userData = undefined\r\n\t\t\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\t\t\t//仅提示用户 \r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '用户信息获取失败',\r\n\t\t\t\t\t\t\t\tcontent: '请点击登录按钮，重新尝试',\r\n\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.newWXLogin(_userData)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\t\t//仅提示用户 \r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '微信绑定授权',\r\n\t\t\t\t\t\t\tcontent: '请允许获取个人信息后重新进入绑定页面',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t/*新微信登录*/\r\n\t\t\tnewWXLogin(userInfo){\r\n\t\t\t\t\r\n\t\t\t\tthis.wxlogin().then(res => {\r\n\t\t\t\t\t//发起登录\r\n\t\t\t\t\tthis.updateUserNew(userInfo).then((res) => {\r\n\t\t\t\t\t\t//异步获取用户信息\r\n\t\t\t\t\t\tthis.getUserInfo()\r\n\t\t\t\t\t\t//提示成功\t\r\n\t\t\t\t\t\tthis.$refs.xhNotify.show({\r\n\t\t\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\t\t\tmessage: \"登录成功\",\r\n\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\tif (redirect) {\r\n\t\t\t\t\t\t\t\t\t//登录成功\r\n\t\t\t\t\t\t\t\t\tthis.$router.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: redirect\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\treturn clearRedirect() //清空\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//登录成功\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/tabBar/personal/index'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\t\tswitch (err.code) {\r\n\t\t\t\t\t\t\tcase -2: //用户未同意授权地理位置\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '定位授权',\r\n\t\t\t\t\t\t\t\t\tcontent: '微信未授权定位或网络信号差(微信内设置无效时，可能需要前往“系统设置”允许微信定位权限)',\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\twx.getSetting({\r\n\t\t\t\t\t\t\t\t\t\t\t  complete:(res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t    if(res.authSetting&&!res.authSetting['scope.userLocation']){\r\n\t\t\t\t\t\t\t\t\t\t\t\t   return uni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!res.authSetting[\"scope.userLocation\"]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '您未允许获取定位权限',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/*前往提示页*/\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl:'/pages/noLocation/noLocation'\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\tcase 2://其它未知错误\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle:'温馨提示',\r\n\t\t\t\t\t\t\t\t\tcontent:err.msg\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t    break\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\tif(err.code === -1){\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle:'温馨提示',\r\n\t\t\t\t\t\t\tcontent:err.msg\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/*微信登录*/\r\n\t\t\tlogin() {\r\n\t\t\t\t//未勾选协议\r\n\t\t\t\tif (!this.isAgreement) {\r\n\t\t\t\t\treturn this.$refs.xhNotify.show({\r\n\t\t\t\t\t\ttype: \"warning\",\r\n\t\t\t\t\t\tmessage: \"请阅读并同意登录协议\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t//防止多次点击\r\n\t\t\t\tthis.isDisabled = true\r\n\t\t\t\tthis.wxlogin().then(res => {\r\n\r\n\t\t\t\t\t//发起登录\r\n\t\t\t\t\tthis.updateUser().then((res) => {\r\n\t\t\t\t\t\t//异步获取用户信息\r\n\t\t\t\t\t\tthis.getUserInfo()\r\n\t\t\t\t\t\t//提示成功\t\r\n\t\t\t\t\t\tthis.$refs.xhNotify.show({\r\n\t\t\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\t\t\tmessage: \"登录成功\",\r\n\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\tif (redirect) {\r\n\t\t\t\t\t\t\t\t\t//登录成功\r\n\t\t\t\t\t\t\t\t\tthis.$router.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: redirect\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\treturn clearRedirect() //清空\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//登录成功\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/tabBar/personal/index'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\t\tswitch (err.code) {\r\n\t\t\t\t\t\t\tcase -2: //用户未同意授权地理位置\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '定位授权',\r\n\t\t\t\t\t\t\t\t\tcontent: '微信未授权定位或网络信号差(微信内设置无效时，可能需要前往“系统设置”允许微信定位权限)',\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\twx.getSetting({\r\n\t\t\t\t\t\t\t\t\t\t\t  complete:(res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t    if(res.authSetting&&!res.authSetting['scope.userLocation']){\r\n\t\t\t\t\t\t\t\t\t\t\t\t   return uni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!res.authSetting[\"scope.userLocation\"]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '您未允许获取定位权限',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//重启\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.login()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/*前往提示页*/\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl:'/pages/noLocation/noLocation'\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\tcase 0: //用户未同意授权获取用户信息\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '微信绑定授权',\r\n\t\t\t\t\t\t\t\t\tcontent: '请允许获取个人信息后重新进入绑定页面',\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!res.authSetting[\"scope.userInfo\"]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '您未允许获取个人信息',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t//重启\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.login()\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\tcase 2://其它未知错误\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle:'温馨提示',\r\n\t\t\t\t\t\t\t\t\tcontent:err.msg\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t    break\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\tif(err.code === -1){\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle:'温馨提示',\r\n\t\t\t\t\t\t\tcontent:err.msg\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.login {\r\n\t\t.wecome-login {\r\n\t\t\tcolor: #000000;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-top: RPX(109);\r\n\t\t}\r\n\r\n\t\t.wecome-logo {\r\n\t\t\twidth: RPX(80);\r\n\t\t\theight: RPX(80);\r\n\t\t\tmargin-bottom: RPX(20);\r\n\t\t\tborder-radius: 50%;\r\n\t\t}\r\n\r\n\t\t.wecome-msg {\r\n\t\t\tfont-size: RPX(20);\r\n\t\t\tcolor: #000000;\r\n\t\t\tmargin-bottom: RPX(113);\r\n\t\t}\r\n\r\n\t\t.wecome-msg-stress {\r\n\t\t\tcolor: #A61115;\r\n\t\t}\r\n\r\n\t\t.tips {\r\n\t\t\ttext-align: center;\r\n\t\t\tcolor: #000000;\r\n\t\t\tfont-size: RPX(18);\r\n\t\t\tmargin-bottom: RPX(8);\r\n\t\t}\r\n\r\n\t\t.login-btn,.cancel-login-btn {\r\n\t\t\tmargin-left: RPX(37);\r\n\t\t\tmargin-right: RPX(37);\r\n\t\t}\r\n\t\t\r\n\t\t.cancel-login-btn {\r\n\t\t\tmargin-top: 15rpx;\r\n\t\t}\r\n\t\t\r\n\t\t.van-button--default{\r\n\t\t\tcolor: #999;\r\n\t\t}\r\n\r\n\t\t.agreement {\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tfont-size: 25rpx;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t.agreement-read {\r\n\t\t\tmargin-left: 10rpx;\r\n\t\t}\r\n\r\n\t\t.agreement-name {\r\n\t\t\tcolor: #A61115;\r\n\t\t\tpadding: 10rpx 0;\r\n\t\t}\r\n\t\t\r\n\t\t.login-warn{\r\n\t\t\tmargin-top: 130rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\t&>.login-warn-tips{\r\n\t\t\t\tcolor: #99abb4;\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t}\r\n\t\t\t&>.link-service{\r\n\t\t\t\tcolor: #5ea8f2;\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t\tmargin-left: 5rpx;\r\n\t\t\t\tpadding: 10rpx 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n\r\n","import mod from \"-!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\TXC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1624340852701\n      var cssReload = require(\"C:/Users/TXC/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}